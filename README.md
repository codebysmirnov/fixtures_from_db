# Генерация fixtures для базы данных

Утилита позволяет сгенерировать произвольные данные основываясь на схеме базы данных.

Данная библиотека разработана с целью заполнения базы данных необходимым объемом данных
для проведения анализа сложных запросов и дальнейшей оптимизации.
Одной из проблем поиска проблем "тяжелых" запросов является "малый объем" данных,
так как умный алгоритм планировщика запроса базы данных может не применять существующие индексы,
ввиду того что это не является оптимальным методом в данной ситуации. Вторая проблема поиска проблемных
мест - отсутствие схожего объема данных с production окружением.

Основной принцип работы:

1. Утилита анализирует схему: таблицы, их связи с другими таблицами, колонки, их типы, ограничения и точность;
2. После анализа, утилита сгенерирует конфигурационный файл для более точной настройки необходимых fixtures;
3. После опциональной настройки конфигурационного файла утилита применит все указанные инструкции для генерации fixtures
   и заполнит ими базу данных.

Поддерживаемые типы данных

| Тип данных                            | Поддержка |
|---------------------------------------|-----------|
| TEXT, VARCHAR                         | +         |
| uuid                                  | +         |
| smallint, integer, bigint             | +         |
| bool                                  | +         |
| date                                  | +         |
| timestamp, timestamptz                | +         |
| jsonb                                 | +         |
| numeric                               | +         |
| jsonb                                 | +         |
| enumerated                            | +         |
| serial, bigserial                     | -         |
| point, box, path, line, lseg, polygon | -         |
| bytea, array                          | -         |
| cidr, inet                            | -         |
| interval                              | -         |
| macaddr, macaddr8                     | -         |
| money                                 | -         |
| real                                  | -         |
| time [with time zone]                 | -         |
| tsquery, tsvector                     | -         |
| xml                                   | -         |

_Вывод можно перенаправить как в файл, так и сразу в бд._

_На текущий момент поддерживается PostgreSQL. Тестировалось на версиях 14.11, 16.2_

# Запуск

Для генерации конфигуарции фикстур необходимо воспользоваться командой introspect,
указав строку для подключения к базе данных.

```shell
# анализ данных бд и генерация конфигураций для fixtures.
# по умолчанию вывод будет произведен в stdout. 
# Вывод можно перенаправить в нужный файл если добавить к команде ' >> <file_path> '
go build .
./fixtures_from_db introspect -c 'host=localhost
port=5432
user=username
dbname=database_name
password=passwod
sslmode=disable'
```

